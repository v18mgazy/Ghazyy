import React, { useEffect, useState } from 'react';
import { Bot, X, Smile, AlertTriangle } from 'lucide-react';
import { onValue, ref } from 'firebase/database';
import { motion } from 'framer-motion';
import { Button } from '@/components/ui/button';
import { Card } from '@/components/ui/card';
import { database } from '@/lib/firebase';

const SmartAssistant = () => {
  const [open, setOpen] = useState(false);
  const [report, setReport] = useState<any>(null);
  const [products, setProducts] = useState<any[]>([]);
  const [tip, setTip] = useState('');

  useEffect(() => {
    // ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙÙˆØ§ØªÙŠØ±
    onValue(ref(database, 'invoices'), snapshot => {
      const invoicesData = snapshot.val();
      if (invoicesData) {
        const all = Object.values(invoicesData);
        const totalSales = all.reduce((acc: number, item: any) => acc + (item.total || 0), 0);
        const orders = all.length;
        const profit = all.reduce((acc: number, item: any) => acc + ((item.total || 0) - (item.cost || 0)), 0);
        setReport({ sales: totalSales, orders, profit });
      }
    });

    // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    onValue(ref(database, 'products'), snapshot => {
      const data = snapshot.val();
      if (data) {
        setProducts(Object.values(data));
      }
    });

    // Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…
    const tips = [
      "Ø±Ø§Ù‚Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§ ÙˆØ¬Ø¯Ù‘Ø¯ Ù…Ø®Ø²ÙˆÙ†Ù‡Ø§ Ù…Ø¨ÙƒØ±Ù‹Ø§.",
        "Ø§Ø¹Ø±Ø¶ Ø®ØµÙˆÙ…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¨Ø·ÙŠØ¦Ø© ÙÙŠ Ø§Ù„Ø­Ø±ÙƒØ©.",
        "Ø±Ø§Ø¬Ø¹ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙƒÙ„ ØµØ¨Ø§Ø­ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø§Ù„Ø³ÙˆÙ‚.",
        "Ø¬Ø±Ù‘Ø¨ ØªØ±ÙˆÙŠØ¬ Ù…Ù†ØªØ¬ Ù…Ø®ØªÙ„Ù ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„.",
        "Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù„ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ø§Ø³ØªØ®Ø¯Ù… ØµÙˆØ±Ù‹Ø§ ÙˆØ§Ø¶Ø­Ø© ÙˆØ¬Ø°Ø§Ø¨Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.",
        "ØªØ§Ø¨Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ´ØªØ±ÙˆØ§ Ù…Ù†Ø° ÙØªØ±Ø© Ø¨Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ©.",
        "Ù‚Ø¯Ù‘Ù… Ù‡Ø¯ÙŠØ© Ø±Ù…Ø²ÙŠØ© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†.",
        "Ù‚Ù„Ù„ Ù…Ù† ØªÙ†Ù‚Ù„ Ø§Ù„Ø²Ø¨ÙˆÙ† Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª Ù„Ø²ÙŠØ§Ø¯Ø© Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ø±Ø§Ù‚Ø¨ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±.",
        "Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ ØªØ³Ø¹ÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†.",
        "ÙˆÙØ± Ø®ÙŠØ§Ø±Ø§Øª Ø¯ÙØ¹ Ù…ØªØ¹Ø¯Ø¯Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ù†Ø¸Ù‘Ù… Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©.",
        "ØªØ§Ø¨Ø¹ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ´Ø¬Ø¹Ù‡Ù… Ø¨Ø±Ø³Ø§Ø¦Ù„ ØªØ­ÙÙŠØ²ÙŠØ©.",
        "Ø§Ø¹Ø±Ø¶ ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙˆØ¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©.",
        "Ù†Ø¸Ù‘Ù… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø´Ù‡Ø±ÙŠÙ‹Ø§ ÙˆØªØ®Ù„Øµ Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø±Ø§ÙƒØ¯Ø©.",
        "Ø§Ø¹Ø±Ø¶ Ù…Ù†ØªØ¬ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¨Ø¹Ø±Ø¶ Ø®Ø§Øµ Ù…Ø¤Ù‚Øª.",
        "Ø£Ø¶Ù ÙˆØµÙÙ‹Ø§ Ù…Ø®ØªØµØ±Ù‹Ø§ ÙˆÙˆØ§Ø¶Ø­Ù‹Ø§ Ù„ÙƒÙ„ Ù…Ù†ØªØ¬.",
        "Ø§Ø¶Ø¨Ø· Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ù†ØªØ¸Ø§Ù….",
        "ØªØ§Ø¨Ø¹ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø£ÙˆÙ„Ù‹Ø§ Ø¨Ø£ÙˆÙ„.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªÙ†Ø§Ø³Ù‚Ø© ÙÙŠ ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø±.",
        "Ø£Ø¶Ù Ù‚Ø³Ù… 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§'.",
        "Ø§Ø®ØªØ¨Ø± Ø§Ù„ØµÙØ­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±.",
        "Ø§Ø³ØªØ®Ø¯Ù… ÙƒÙ„Ù…Ø§Øª Ø¨Ø³ÙŠØ·Ø© ÙˆÙˆØ§Ø¶Ø­Ø© ÙÙŠ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.",
        "Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ø§Ø³ØªØ®Ø¯Ù… ØµÙˆØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆÙ‡Ù… ÙŠØ³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…Ù†ØªØ¬.",
        "ØªØ§Ø¨Ø¹ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (ROAS).",
        "Ù‚Ø³Ù‘Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø§Øª Ù„ÙŠØ³Ù‡Ù„ Ø§Ù„Ø¨Ø­Ø«.",
        "Ø£Ø¶Ù Ø³ÙŠØ§Ø³Ø© Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø±Ù†Ø©.",
        "Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…ØªØ¬Ø±.",
        "Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯.",
        "ÙˆÙØ± Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ Ø¹Ù†Ø¯ Ø­Ø¯ Ù…Ø¹ÙŠÙ†.",
        "Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙÙŠ Ø§Ù„Ø¨Ø§Ù†Ø± Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±.",
        "Ø§Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ù…Ùˆ.",
        "Ø¬Ø±Ù‘Ø¨ Ø­Ù…Ù„Ø§Øª Ù…Ø­Ø¯ÙˆØ¯Ø© Ø§Ù„Ø²Ù…Ù† Ù„ØªØ­ÙÙŠØ² Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ø£Ø¶Ù Ø®Ø§Ù†Ø© Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø¨.",
        "Ø§Ø³Ø£Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù† ØªØ¬Ø±Ø¨ØªÙ‡Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "ØªØ§Ø¨Ø¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø¥Ø±Ø¬Ø§Ø¹Ù‹Ø§ ÙˆØ­Ù„Ù„ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨.",
        "Ø§Ø³ØªØ®Ø¯Ù… ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù‚ØµÙŠØ±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.",
        "Ø§Ø³ØªÙØ¯ Ù…Ù† Ù…ÙˆØ§Ø³Ù… Ø§Ù„Ø¹ÙŠØ¯ ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶.",
        "Ø­Ø¯Ø¯ Ù‡Ø¯Ù Ù…Ø¨ÙŠØ¹Ø§Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠ Ù„ÙØ±ÙŠÙ‚Ùƒ.",
        "Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªÙŠ ØªÙ… Ù…Ø´Ø§Ù‡Ø¯ØªÙ‡Ø§ Ù…Ø¤Ø®Ø±Ù‹Ø§.",
        "Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ ÙˆÙ„ÙŠØ³ ÙÙ‚Ø· Ø§Ù„Ø³Ø¹Ø±.",
        "ØªØ§Ø¨Ø¹ Google Trends Ù„Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª A/B Ù„Ø­Ù…Ù„Ø§ØªÙƒ.",
        "ÙˆÙØ± Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ§Ø¶Ø­ Ù„Ù„Ø¯Ø¹Ù….",
        "ØªØ§Ø¨Ø¹ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ© ÙÙŠ Ø§Ù„Ø·Ù„Ø¨.",
        "Ø´Ø§Ø±Ùƒ Ø§Ù„Ù‚ØµØµ Ø§Ù„Ù…Ù„Ù‡Ù…Ø© Ù„Ø¹Ù…Ù„Ø§Ø¦Ùƒ.",
        "ØªØ§Ø¨Ø¹ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† ÙˆØªØ¹Ù„Ù… Ù…Ù†Ù‡Ø§.",
        "Ø­Ø¯Ø« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ.",
        "Ø£Ø¸Ù‡Ø± Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„ØªØ­ÙÙŠØ² Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ù‚Ù„Ù„ Ù…Ù† Ø¹Ø¯Ø¯ Ø®Ø·ÙˆØ§Øª Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ø§Ø¬Ø¹Ù„ ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙƒØ¨ÙŠØ±.",
        "Ø£Ø¶Ù Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø£Ø¯ÙˆØ§Øª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª Ù„Ù„ÙØ±ÙŠÙ‚.",
        "Ø®ØµØµ Ù…Ø³Ø§Ø­Ø© ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©.",
        "ØªØ§Ø¨Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ø³ØªØ¨ÙŠØ§Ù†Ø§Øª.",
        "Ø¯Ø±Ù‘Ø¨ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ© Ù„Ø¬Ø°Ø¨ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡.",
        "Ø£Ø¶Ù Ø¹Ø¯Ø§Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¤Ù‚ØªØ©.",
        "Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª.",
        "Ø§Ø®ØªØ¨Ø± Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù….",
        "ØªØ§Ø¨Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ† ÙˆÙ‚Ø¯Ù… Ù„Ù‡Ù… Ø¹Ø±ÙˆØ¶Ù‹Ø§.",
        "Ø§Ø¹Ø±Ø¶ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰.",
        "Ø£Ø¶Ù ÙÙŠØ¯ÙŠÙˆ ØªØ±Ø­ÙŠØ¨ÙŠ Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ØªØ¬Ø±.",
        "Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù‚ØµÙŠØ±Ø© ÙˆØ³Ù‡Ù„Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.",
        "Ù‚Ø³Ù… Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.",
        "Ø±Ø§Ø¬Ø¹ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙƒÙ„ 3 Ø£ÙŠØ§Ù….",
        "Ø§Ø­ØªÙØ¸ Ø¨Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.",
        "Ø­Ø¯Ø« Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ.",
        "Ø§Ø®ØªØ¨Ø± ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹ Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ù…Ø®ØªÙ„ÙØ©.",
        "Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø³Ø±Ø¹Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.",
        "Ø£Ø¶Ù ÙƒÙˆØ¯ Ø®ØµÙ… Ù„Ù„Ø·Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ„.",
        "Ø­Ù„Ù„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©.",
        "Ø­Ø¯Ø¯ Ø£Ù‡Ø¯Ø§Ù ÙŠÙˆÙ…ÙŠØ© Ù„Ù„ÙØ±ÙŠÙ‚.",
        "Ø´Ø§Ø±Ùƒ Ù„Ù‚Ø·Ø§Øª Ù…Ù† Ø­ÙŠØ§Ø© Ø§Ù„Ù…ØªØ¬Ø± Ø¹Ù„Ù‰ Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù….",
        "Ø±Ø§Ù‚Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ù„Ù„Ø¨Ø­Ø« Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØ¬Ø±.",
        "Ø¬Ø±Ù‘Ø¨ Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¯ÙˆØ±ÙŠ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡.",
        "Ø£Ù†Ø´Ø¦ Ù…Ø¬ØªÙ…Ø¹ ØµØºÙŠØ± Ø­ÙˆÙ„ Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯.",
        "Ø§Ø¹Ø±Ø¶ Ø²Ø± ØªÙˆØ§ØµÙ„ Ø³Ø±ÙŠØ¹ ÙÙŠ ÙƒÙ„ ØµÙØ­Ø©.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù….",
        "Ø£Ø¶Ù Ù‚Ø³Ù… 'Ù…ÙˆØµÙ‰ Ø¨Ù‡ Ù„Ùƒ'.",
        "ØªØ§Ø¨Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯ ÙˆØ§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø±Ø¶Ø§Ù‡Ù….",
        "Ù‚Ù… Ø¨ØªØ­Ù„ÙŠÙ„ ØªØ±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ«Ù‡.",
        "Ø­Ø¯Ø« Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ.",
        "Ø§Ø­ØªÙÙ„ Ø¨ÙˆØµÙˆÙ„Ùƒ Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆØ´Ø§Ø±ÙƒÙ‡Ø§.",
        "Ø£Ø¶Ù Ø®Ø§ØµÙŠØ© ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡.",
        "Ø§Ø³ØªØ®Ø¯Ù… Google Analytics Ù„ÙÙ‡Ù… Ø¬Ù…Ù‡ÙˆØ±Ùƒ.",
        "Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø´ÙƒØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¨Ø¹Ø¯ ÙƒÙ„ Ø·Ù„Ø¨.",
        "Ø§Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª.",
        "Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø³Ø­Ø¨ Ø¹Ù„Ù‰ Ø¬ÙˆØ§Ø¦Ø² Ø¬Ø²Ø¡ Ù…Ù† Ø­Ù…Ù„Ø§ØªÙƒ.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ.",
        "Ø§Ø³ØªØ®Ø¯Ù… Ø±ÙˆØ¨ÙˆØª Ø¯Ø±Ø¯Ø´Ø© Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø²ÙˆØ§Ø±.",
        "Ø§Ø¬Ø¹Ù„ Ù…Ø­ØªÙˆØ§Ùƒ Ø³Ù‡Ù„ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.",
        "Ø£Ø¶Ù ØµÙØ­Ø© 'Ù…Ù† Ù†Ø­Ù†' Ø¨Ø´Ø±Ø­ ØµØ§Ø¯Ù‚.",
        "Ø´Ø§Ø±Ùƒ Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ØµÙ†Ø¹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù….",
        "Ø­Ù„Ù„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØªØ®Ù„ÙŠ Ø¹Ù† Ø§Ù„Ø³Ù„Ø©.",
        "ØªØ§Ø¨Ø¹ ØªÙ†Ù‚Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.",
        "Ø¬Ø±Ù‘Ø¨ Ø£Ø´ÙƒØ§Ù„ Ù…ØªÙ†ÙˆØ¹Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.",
        "Ø§Ø¹ØªÙ…Ø¯ Ø³ÙŠØ§Ø³Ø© Ø´ÙØ§ÙØ© ÙÙŠ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡.",
        "Ø§Ø³ØªÙØ¯ Ù…Ù† ØªÙ‚ÙŠÙŠÙ…Ø§Øª Google Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡.",
        "Ø£Ù†Ø´Ø¦ Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.",
        "Ø£Ø¶Ù Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ."
    ];
    const index = new Date().getDate() % tips.length;
    setTip(tips[index]);
  }, []);

  const lowStock = products.filter(p => p.stock <= 2);
  const topSeller = [...products].sort((a, b) => a.stock - b.stock)[0];

  return (
    <>
      <div className="fixed bottom-6 left-6 z-50">
        <motion.button
          className="relative bg-primary p-4 rounded-full shadow-xl text-white hover:scale-110 transition"
          onClick={() => setOpen(true)}
          whileHover={{ rotate: [0, -5, 5, 0] }}
        >
          <Bot className="h-6 w-6" />
        </motion.button>
      </div>

      {open && (
        <motion.div
          initial={{ opacity: 0, y: 50 }}
          animate={{ opacity: 1, y: 0 }}
          className="fixed bottom-24 left-6 w-[350px] bg-white dark:bg-gray-900 rounded-xl shadow-xl p-4 z-50"
        >
          <div className="flex justify-between items-center mb-2">
            <h2 className="text-lg font-semibold flex items-center gap-2">
              <Smile className="w-5 h-5 text-yellow-500" /> Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ
            </h2>
            <Button variant="ghost" size="icon" onClick={() => setOpen(false)}>
              <X className="w-4 h-4" />
            </Button>
          </div>

          <div className="space-y-3 text-sm">
            <p>ğŸ‘‹ ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±! Ø¥Ù„ÙŠÙƒ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…:</p>

            {report && (
              <Card className="p-2 text-xs bg-accent">
                <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: {report.sales}</p>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: {report.orders}</p>
                
              </Card>
            )}

            {topSeller && (
              <p>ğŸ”¥ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§: <strong>{topSeller.name}</strong></p>
            )}

            {lowStock.length > 0 && (
              <p className="text-red-500 flex items-start gap-1 flex-col">
                <span className="flex items-center gap-1">
                  <AlertTriangle className="w-4 h-4" />
                  Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø§Ù„Ù†ÙØ§Ø¯: {lowStock.length}
                </span>
                <span className="pl-5 text-sm">
                  ğŸ”» {lowStock[0].name}
                  {lowStock.length > 1 && ` ÙˆØ§Ù„Ù…Ø²ÙŠØ¯...`}
                </span>
              </p>
            )}

            {tip && (
              <p className="bg-muted px-3 py-2 rounded text-xs font-medium">ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…: {tip}</p>
            )}
          </div>
        </motion.div>
      )}
    </>
  );
};

export default SmartAssistant;
